<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
</head>
<body>
  <input q-value="value" type="text" id="input">
  <div q-text="value" id="el"></div>
  <script>
    var elems = [document.getElementById('el'), document.getElementById('input')];

    var data = {
      value: 'hello'
    };

    var command = {
      text: function(str) {
        this.innerHTML = str;
      },
      value: function(str) {
        this.setAttribute('value', str);
      }
    }

    var scan = function() {
      for(var i = 0, len = elems.length; i < len; i++) {
        var elem = elems[i];
        elem.command = [];
        for(var j = 0, len1 = elem.attributes.length; j < len1; j++) {
          var attr = elem.attributes[j];
          if(attr.nodeName.indexOf('q-' >= 0)) {
            command[attr.nodeName.slice(2)].call(elem, data[attr.nodeValue]);
            elem.command.push(attr.nodeName.slice(2));
          }
        }
      }
    }

    var bValue;
    var defineGetAndSet = function(obj, propName) {
      try {
        Object.defineProperties(obj, propName, {
          get: function() {
            return bValue;
          },
          set: function(newValue) {
            bValue = newValue;
            scan();
          },
          enumerable: true,
          configurable: true,
        })
      } catch(error) {
        console.log('browser not supported');
      }
    };

    scan();

    defineGetAndSet(data, 'value');

    elems[1].addEventListener('keyup', function(e) {
      data.value = e.target.value;
    }, false);
    
    setTimeout(() => {
      data.value = 'fuck';
    }, 2000)
  </script>
</body>
</html>