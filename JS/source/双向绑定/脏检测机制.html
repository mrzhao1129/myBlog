<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
</head>
<body>
  <input q-event="value" ng-bind="value" type="text" id="input">
  <div q-event="text" ng-bind="value" id="el"></div>
  <script>
    var elems = [document.getElementById('el'), document.getElementById('input')];

    var data = {
      value: 'hello',
    };

    var command = {
      text: str => {
        this.innerHTML = str;
      },
      value: str => {
        this.setAttribute('value', str);
      }
    };
    
    var scan = elems => {
      for(var i = 0, len = elems.length; i < len; i++) {
        var elem = elems[i];
        elem.command = {};
        for(var j = 0, len1 = elem.attributes.length; j < len1; j++) {
          var attr = elem.attributes[j];
          if(attr.nodeName.indexOf('q-event') >= 0) {
            var dataKey = elem.getAttribute('ng-bind') || undefined;
            command[attr.nodeValue].call(elem, data[dataKey]);
            elem.command[attr.nodeValue] = data[dataKey];
          }
        }
      }
    }

    var digest = elems => {
      for(var i = 0, len = elems.length; i < len; i++) {
        var elem = elems[i];
        for(var j = 0, len1 = elem.attributes.length; j < len1; j++) {
          var attr = elem.attributes[j];
          if(attr.nodeName.indexOf('q-enent') >= 0) {
            var dataKey = elem.getAttribute('ng-bind') || undefined;
            if(elem.command[attr.nodeValue] !== data[dataKey]) {
              command[attr.nodeValue].call(elem, data[dataKey]);
              elem.command[attr.nodeValue] = data[dataKey];
            }
          }
        }
      }
    }
    
    scan(elems);

    function $digest(value) {
      var list = document.querySelectorAll('[ng-bind=' + value + ']');
      digest(list);
    }

    elems[1].addEventListener('keyup', e => {
      data.value = e.target.value;
      $digest(e.target.getAttribute('ng-bind'));
    }, false)
  </script>
</body>
</html>